webpackJsonp([4],{SG7z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("PJh5"),n=a.n(o),i=(a("NYxO"),{name:"InfoVerifyOldPhoneDlg",props:["phone"],data:function(){return{counter:0,time:"",formData:{verifyCode:""},rule:{oldPwd:[{validator:function(e,t,a){""===t?a(new Error("密码不能为空!")):a()},trigger:"blur"}]},showDialog:!0}},methods:{startCounter:function(){var e=this;this.counter=10,this.now=n()().unix(),this.interval&&clearTimeout(this.interval),this.interval=setInterval(function(){var t=10-(n()().unix()-e.now);t<=0?(e.counter=0,e.interval&&clearTimeout(e.interval)):e.counter=t},1e3)},next:function(){this.$emit("verifyCodeSucceed"),this.formData.oldPwd=""}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",staticClass:"form",attrs:{model:e.formData,"status-icon":"",rules:e.rule,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"已绑定手机："}},[a("span",[e._v(e._s(e.phone))])]),e._v(" "),a("el-form-item",{attrs:{label:"短信验证码：",prop:"verifyCode"}},[a("el-input",{staticClass:"verifyCode",attrs:{"auto-complete":"off",maxLength:"6",minLength:"6"},model:{value:e.formData.oldPwd,callback:function(t){e.$set(e.formData,"oldPwd",t)},expression:"formData.oldPwd"}}),e._v(" "),a("el-button",{staticClass:"btnCode",attrs:{type:"primary",disabled:e.counter>0},on:{click:function(t){e.startCounter()}}},[e._v("\n        "+e._s(e.counter>0?"获取验证码("+e.counter+")":"获取验证码")+"\n      ")])],1)],1),e._v(" "),a("el-row",{staticClass:"btnNextContainer",attrs:{type:"flex",justify:"space-between"}},[a("el-button",{staticClass:"btnNext",attrs:{type:"primary"},on:{click:function(t){e.next()}}},[e._v("下一步")])],1)],1)},staticRenderFns:[]};var l={name:"InfoVerifyOldPhoneDlg",data:function(){return{counter:0,time:"",formData:{verifyPhone:"",verifyCode:""},showDialog:!0}},methods:{startCounter:function(){var e=this;this.counter=10,this.now=n()().unix(),this.interval&&clearTimeout(this.interval),this.interval=setInterval(function(){var t=10-(n()().unix()-e.now);t<=0?(e.counter=0,e.interval&&clearTimeout(e.interval)):e.counter=t},1e3)},next:function(){this.$emit("verifyNewCodeSucceed",this.formData.verifyPhone),this.formData.verifyCode=""}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"form",attrs:{model:e.formData,"status-icon":"","label-width":"120px"}},[a("el-form-item",{attrs:{label:"绑定新手机："}},[a("el-input",{staticClass:"verifyPhone",attrs:{"auto-complete":"off",maxLength:"6",minLength:"6"},model:{value:e.formData.verifyPhone,callback:function(t){e.$set(e.formData,"verifyPhone",t)},expression:"formData.verifyPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"短信验证码："}},[a("el-input",{staticClass:"verifyCode",attrs:{"auto-complete":"off",maxLength:"6",minLength:"6"},model:{value:e.formData.verifyCode,callback:function(t){e.$set(e.formData,"verifyCode",t)},expression:"formData.verifyCode"}}),e._v(" "),a("el-button",{staticClass:"btnCode",attrs:{type:"primary",disabled:e.counter>0},on:{click:function(t){e.startCounter()}}},[e._v("\n        "+e._s(e.counter>0?"获取验证码("+e.counter+")":"获取验证码")+"\n      ")])],1)],1),e._v(" "),a("el-row",{staticClass:"btnNextContainer",attrs:{type:"flex",justify:"space-between"}},[a("el-button",{staticClass:"btnNext",attrs:{type:"primary"},on:{click:function(t){e.next()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var c=0,u=2,d={name:"info",components:{"verify-old":a("VU/8")(i,r,!1,function(e){a("jaXj")},"data-v-82b6b196",null).exports,"verify-new":a("VU/8")(l,s,!1,function(e){a("tXfU")},"data-v-3c83041e",null).exports},data:function(){return{verifyDlg:"VerifyOld",step:c,showDlgOld:!1,showDlgNew:!1,attrs:{realName:{key:"真实姓名",value:"",enableModify:!1},policeIdCard:{key:"警官证号",value:"",enableModify:!1},mobilePhone:{key:"手机号码",value:"",enableModify:!0},idCard:{key:"身份证号",value:"",enableModify:!1},companyName:{key:"所在单位",value:"",enableModify:!1},account:{key:"登录账号",value:"",enableModify:!1},email:{key:"邮箱",value:"",enableModify:!1},lastLoginTime:{key:"上次登录",value:"",enableModify:!1},genre:{key:"账号等级",value:"",enableModify:!1}},orders:["realName","policeIdCard","mobilePhone","idCard","companyName","account","email","genre","lastLoginTime"]}},created:function(){var e=this;gapi.getUsersCurrent().then(function(t){console.log(t),1===t.data.code&&(e.attrs.realName.value=t.data.data.realName,e.attrs.policeIdCard.value=t.data.data.policeIdCard,e.attrs.mobilePhone.value=t.data.data.mobilePhone,e.attrs.idCard.value=t.data.data.idcard,e.attrs.companyName.value=t.data.data.companyName,e.attrs.account.value=t.data.data.account,e.attrs.email.value=t.data.data.email,e.$store.dispatch("me/initMe",t.data.data))}).catch(function(e){console.log(e)})},methods:{isShowAttr:function(e){var t=this.attrs[e];return!!(t&&null!==t.key&&null!==t.value&&t.key.length>0&&t.value.length>0)},modify:function(e){this.step>=u?this.showDlgNew=!0:this.showDlgOld=!0},verifyCodeSucceed:function(){this.showDlgOld=!1,this.showDlgNew=!0,this.step=u},verifyNewCodeSucceed:function(e){this.showDlgNew=!1}},computed:{},mounted:function(){this.attrs.lastLoginTime.value=localStorage.getItem("lastLoginTime"),this.attrs.genre.value=localStorage.getItem("genre")}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user_info"},[e._l(e.orders,function(t){return a("span",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowAttr(t),expression:"isShowAttr(k)"}],attrs:{id:"row"}},[a("span",{attrs:{id:"col_left"}},[e._v(e._s(e.attrs[t].key+":"))]),e._v(" "),a("span",{attrs:{id:"col_right"}},[a("span",[e._v(e._s(e.attrs[t].value)+" ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.attrs[t].enableModify,expression:"attrs[k].enableModify"}],staticClass:"info_phone_modify",on:{click:function(a){e.modify(e.attrs[t].key)}}},[e._v("[修改]")])])])])}),e._v(" "),a("el-dialog",{attrs:{title:"更改手机号码",visible:e.showDlgOld,width:"450px",top:"30vh",center:""},on:{"update:visible":function(t){e.showDlgOld=t}}},[a("verify-old",{attrs:{phone:e.attrs.mobilePhone.value},on:{verifyCodeSucceed:e.verifyCodeSucceed}})],1),e._v(" "),a("el-dialog",{attrs:{title:"绑定新账号",visible:e.showDlgNew,width:"450px",top:"30vh",center:""},on:{"update:visible":function(t){e.showDlgNew=t}}},[a("verify-new",{on:{verifyNewCodeSucceed:e.verifyNewCodeSucceed}})],1)],2)},staticRenderFns:[]};var v=a("VU/8")(d,f,!1,function(e){a("obu8")},"data-v-0f6c0b24",null);t.default=v.exports},jaXj:function(e,t){},obu8:function(e,t){},tXfU:function(e,t){}});
//# sourceMappingURL=4.7a1e0654bd3f3b532137.js.map